<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<script src="../../requirejs/require.js"></script>
	<script type="text/javascript" src="../../orion/plugin.js"></script>
	
	<script>
	/*global window eclipse require console*/
	require({ baseUrl: '../..',
		      packages: [{ name: 'dojo', location: 'org.dojotoolkit/dojo', main: 'lib/main-browser', lib: '.' },
						 { name: 'dijit', location: 'org.dojotoolkit/dijit', main: 'lib/main',lib: '.' },
						 { name: 'dojox', location: 'org.dojotoolkit/dojox', main: 'lib/main', lib: '.' } ],
		      paths: { text: 'requirejs/text', i18n: 'requirejs/i18n', domReady: 'requirejs/domReady' }
	});
		
	require(['dojo', 'vmware/console/vmware-console'], function () {
		console.log('Require JS modules ready');
		var dojo = require('dojo');
	
		var provider = new eclipse.PluginProvider();

		var mockGcli = {
			addCommand: function(commandDef) {
				var serviceImpl = {
					exec: commandDef.exec
				};
				var serviceProps = {
					name: commandDef.name,
					params: commandDef.params,
					description: commandDef.description,
					manual: commandDef.manual
				};
				provider.registerServiceProvider("orion.console.command", serviceImpl, serviceProps);
			}
		}; //mockGcli
	
		dojo.ready(function() {
			console.log('Starting plugin VMWare console');
			require('vmware/console/vmware-console').init(mockGcli);
			provider.connect();
		}); //dojo.ready
	}); //require
		
	</script>
</head>
<body>
<h1>Test command plugin</h1>
</body>
</html>
